/* ========================
   Product Detail (scoped .pd)
   ======================== */
:root{
  --brand:#ff8a00; --brand-700:#ff7a00;
  --ink:#16181d; --muted:#6b7280; --line:#e8ebf0;
  --card:#fff; --bg-soft:#f6f7fb;
  --radius-xl:18px;
  --shadow-sm:0 6px 18px rgba(0,0,0,.06);
  --shadow-md:0 16px 36px rgba(0,0,0,.14);
}

/* ===== Crumbs ===== */
.pd-crumbs{ display:flex; align-items:center; gap:8px; color:#6b7280; margin:0 0 6px; font-size:14px; }
.pd-crumbs a{ color:inherit; text-decoration:none; }
.pd-crumbs .current{ color:#111; font-weight:700; }

/* ===== Header ===== */
.pd{ margin-top:8px; }
.pd-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:4px 0 18px; }
.pd-title{ margin:0; font-size:clamp(24px,3.4vw,36px); font-weight:900; letter-spacing:.2px; }
.pd-chip{ padding:6px 12px; font-size:13px; color:#5b616e; background:#fff; border:1px solid var(--line); border-radius:999px; }

/* ===== Layout ===== */
.pd-body{ display:grid; grid-template-columns:1.15fr .85fr; gap:26px; }
.pd-media{ display:flex; flex-direction:column; gap:16px; min-width:0; }

.pd-card{
  background:linear-gradient(180deg,#fff,#fffffff5);
  border:1px solid var(--line);
  border-radius:var(--radius-xl);
  box-shadow:var(--shadow-sm);
  padding:16px;
}

/* ===== HERO ===== */
.pd-hero{
  position:relative;
  margin:0;
  border-radius:var(--radius-xl);
  background:linear-gradient(145deg,#fff,#fafafa);
  border:1px solid var(--line);
  overflow:hidden;
  box-shadow:var(--shadow-md);
  height: clamp(420px, 54vh, 680px);
  display:flex; align-items:center; justify-content:center;
  padding: clamp(6px, 1.2vw, 16px);
}
.pd-hero::after{
  content:""; position:absolute; inset:-18% -18% auto -18%;
  height:40%; background:radial-gradient(60% 60% at 70% 10%, rgba(255,138,0,.08), transparent 60%);
  pointer-events:none;
}
.pd-hero img{ width:auto; height:100%; max-width:100%; object-fit:contain; display:block; transition:opacity .45s ease, transform .32s cubic-bezier(.2,.8,.2,1); }
.pd-hero img.is-fading{ opacity:.05; transform:scale(.99); }

/* zoom btn */
.pd-zoom-btn{
  position:absolute; right:14px; top:14px; z-index:2;
  width:36px; height:36px; border-radius:10px; border:1px solid var(--line);
  background:rgba(255,255,255,.9); backdrop-filter:blur(4px);
  display:grid; place-items:center; color:#333; cursor:pointer;
  box-shadow:var(--shadow-sm);
  transition:transform .12s ease, filter .2s ease, background .25s ease;
}
.pd-zoom-btn:hover{ transform:translateY(-1px); filter:brightness(1.03); }

/* ===== MINI CAROUSEL (no progress) ===== */
.pd-mini{
  position:relative;
  display:flex; align-items:center; gap:10px;
  background:#fff; border:1px solid var(--line); border-radius:14px;
  padding:10px; box-shadow:var(--shadow-sm);
  margin-top:2px;
}
.pd-mini-viewport{ overflow:hidden; width:100%; }
.pd-mini-track{ display:flex; gap:10px; transition: transform .5s cubic-bezier(.2,.8,.2,1); will-change: transform; }
.pd-mini-item{
  flex:0 0 92px; height:70px; padding:0; border:1px solid var(--line);
  border-radius:12px; background:#fff; cursor:pointer; display:grid; place-items:center;
  transition:border-color .25s ease, transform .18s ease, box-shadow .25s ease, outline-color .25s ease;
}
.pd-mini-item:hover{ transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.06); }
.pd-mini-item img{ width:100%; height:100%; object-fit:cover; border-radius:10px; }
.pd-mini-item.is-active{ outline:2px solid rgba(255,153,0,.38); border-color:#ffcf80; }
.pd-mini-prev,.pd-mini-next{
  width:36px; height:36px; border-radius:10px; border:1px solid var(--line);
  background:#fff; cursor:pointer; display:grid; place-items:center; color:#333;
  transition:filter .2s ease, transform .15s ease;
}
.pd-mini-prev:hover,.pd-mini-next:hover{ filter:brightness(1.04); transform:translateY(-1px); }

/* dots */
.pd-mini-dots{ display:flex; gap:8px; margin-top:8px; }
.pd-mini-dots button{ width:8px; height:8px; border-radius:999px; border:0; background:#d7dbe3; cursor:pointer; transition: width .25s ease, background .25s ease; }
.pd-mini-dots button[aria-selected="true"]{ width:22px; background:#ff9f1a; }

/* ===== INFO PANEL ===== */
.pd-info{ display:flex; flex-direction:column; gap:14px; }
@media (min-width:1100px){ .pd-info{ position:sticky; top:88px; } }

.pd-price-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.pd-price-label{ color:var(--muted); font-weight:800; }
.pd-price-number{ margin-top:4px; font-size:clamp(22px,2.8vw,30px); color:var(--brand); }
.pd-actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }

.pd .pd-btn{
  padding:12px 16px; border-radius:14px; border:1px solid transparent;
  font-weight:900; letter-spacing:.2px; cursor:pointer; text-decoration:none;
  display:inline-flex; align-items:center; gap:10px;
  transition:transform .12s ease, filter .2s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
}
.pd .pd-btn svg{ display:block; }
.pd .pd-btn--ghost{ background:#fff; border-color:var(--line); color:var(--ink); }
.pd .pd-btn--ghost:hover{ filter:brightness(1.02); transform:translateY(-1px); }
.pd .pd-btn--cta{
  color:#fff; background:linear-gradient(180deg,#ffc266 0%,#ff9800 58%,#ff8a00 100%);
  border-color:#ff9f1a; box-shadow:0 12px 28px rgba(255,153,0,.28), inset 0 -2px 0 rgba(0,0,0,.08);
}
.pd .pd-btn--cta:hover{ filter:brightness(1.03); transform:translateY(-1px); }

.pd-icbtn{
  width:34px; height:34px; border-radius:10px; border:1px solid var(--line);
  background:#fff; display:grid; place-items:center; cursor:pointer;
  transition:transform .12s ease, filter .2s ease;
}
.pd-icbtn:hover{ transform:translateY(-1px); filter:brightness(1.03); }
.pd-fav[aria-pressed="true"]{ border-color:#ffcf80; background:rgba(255,153,0,.08); }

/* ===== Accordion ===== */
.pd-accordion{ display:grid; gap:12px; }
.pd-acc{ border:1px solid var(--line); border-radius:14px; background:#fff; box-shadow:var(--shadow-sm); overflow:hidden; }
.pd-acc-head{
  width:100%; padding:12px 14px; background:linear-gradient(180deg,#fff,#fafafa);
  display:flex; align-items:center; gap:10px; border:0; cursor:pointer; font-weight:800;
}
.pd-acc-ico{ width:22px; height:22px; display:inline-grid; place-items:center; color:#ff9f1a; }
.pd-acc-panel{ padding:12px 14px; color:#333; line-height:1.55; }
.pd-acc:not(.is-open) .pd-acc-panel{ display:none; }

/* ===== Responsive ===== */
@media (max-width:980px){
  .pd-body{ grid-template-columns:1fr; }
  .pd-hero{ height: clamp(320px, 48vh, 560px); }
  .pd-mini-item{ flex-basis:78px; height:60px; }
  .pd-acc.is-open .pd-acc-panel{ display:block; }
}

/* ===== Topbar ===== */
.pd-topbar{
  position:fixed; left:0; right:0; top:72px; z-index:70;
  transform:translateY(-120%); transition:transform .25s ease, box-shadow .25s ease;
}
.pd-topbar.is-show{ transform:none; box-shadow:0 10px 18px rgba(0,0,0,.06); }
.pd-topbar__inner{
  max-width:min(1280px,92vw); margin:0 auto; display:flex; align-items:center; gap:12px;
  background:rgba(255,255,255,.88); backdrop-filter:blur(6px);
  border:1px solid var(--line); border-radius:16px; padding:8px 12px;
}
.pd-topbar__title{ font-weight:900; }
.pd-topbar__price{ margin-left:auto; font-weight:900; color:var(--brand); }
.pd-topbar__cta{ padding:10px 14px; }

/* ===== Lightbox ===== */
.pd-lightbox[hidden]{ display:none; }
.pd-lb-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.64); backdrop-filter:blur(2px); }
.pd-lb-stage{ position:fixed; inset:0; display:grid; place-items:center; pointer-events:none; }
.pd-lb-img{
  max-width:min(92vw, 1400px); max-height:86vh; object-fit:contain; border-radius:14px;
  box-shadow:0 20px 60px rgba(0,0,0,.5); background:#111; pointer-events:auto;
}
.pd-lb-close,.pd-lb-prev,.pd-lb-next{
  position:fixed; z-index:2; width:40px; height:40px; border-radius:12px; border:1px solid #ffffff33;
  background:#ffffff1a; color:#fff; display:grid; place-items:center; cursor:pointer; backdrop-filter:blur(2px);
  transition:transform .12s ease, background .2s ease;
}
.pd-lb-close{ top:20px; right:20px; }
.pd-lb-prev{ left:20px; top:50%; transform:translateY(-50%); }
.pd-lb-next{ right:20px; top:50%; transform:translateY(-50%); }
.pd-lb-prev:hover,.pd-lb-next:hover,.pd-lb-close:hover{ transform:translateY(-1px); background:#ffffff2d; }
/* === FIX: lightbox luôn phủ trên mọi thứ + ẩn nút zoom khi mở === */
.pd-lb-backdrop{ z-index: 10000; }   /* nền mờ */
.pd-lb-stage{ z-index: 10001; }      /* khung ảnh lớn */

.pd-lb-open .pd-zoom-btn{
  opacity: 0;
  pointer-events: none;
}
/* gợi ý: tô trái tim khi đã yêu thích */
.pd-fav.is-active svg {
  fill: currentColor;
}
